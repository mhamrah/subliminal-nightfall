# Mise configuration for Subliminal Nightfall
# https://mise.jdx.dev/configuration.html

# Tools: managed versions for Node, pnpm, Rust

[tools]
node = "22.10.0"
pnpm = "10.11.1"
rust = "1.81.0"

[env]
# Force pnpm to use the workspace
_.file = ".env"

[tasks.install]
description = "Install all dependencies (Rust & Node via mise)"
run = "pnpm install"

[tasks.dev]
description = "Start website development server (with theme generation)"
run = "pnpm run gen:themes && pnpm --filter website dev"

[tasks.gen]
description = "Generate all theme targets from theme.toml"
run = "pnpm run gen:themes"

[tasks.build]
description = "Generate themes then build all packages"
run = "pnpm run gen:themes && pnpm build"

[tasks."build:website"]
description = "Generate themes then build website for production"
run = "pnpm run gen:themes && pnpm --filter website build"

[tasks.preview]
description = "Generate themes then preview website build"
run = "pnpm run gen:themes && pnpm --filter website preview"

[tasks.verify]
description = "Verify symlink setup"
run = "./scripts/verify-symlinks.sh"

[tasks.clean]
description = "Clean all build artifacts"
run = "pnpm clean"

[tasks.format]
description = "Format code with Prettier"
run = "pnpm format"

[tasks.lint]
description = "Lint code with ESLint"
run = "pnpm lint"
